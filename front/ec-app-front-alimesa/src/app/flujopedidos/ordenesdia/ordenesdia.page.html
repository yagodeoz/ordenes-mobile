<ion-header class="osahan-nav">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Lista de Ordenes por dia
        </ion-title>
    </ion-toolbar>
</ion-header>
<ion-content class="ion-padding order-list-page" color="light">
    
    
    <ion-searchbar class="p-0 mb-2" placeholder="Buscar órden por Nombre..."  #buscadorCliente
                 [animated]="true" (keyup.enter)="buscarCliente(buscadorCliente.value)"
  ></ion-searchbar>


    <div class="text-center mb-2"><small>Fecha: {{fechaHoy}} </small></div>
    
    <div class="card order-item-card mb-2" *ngFor=" let item of listaOrdenes ">
        <div class="d-flex align-items-center p-3">
            <div class="overflow-hidden ml-2">
                <h6 class="font-weight-bold text-dark mb-0 text-truncate">{{item.RAZONSOCIALCOMPRADOR}}</h6>
                <div class="text-truncate text-primary">Identificación: {{item.IDENTIFICACIONCOMPRADOR}}</div>
                <div class="text-truncate text-primary">Dire.: {{item.DIRECCIONCOMPRADOR}}</div>
                <div class="small text-secondary">
                    <ion-icon name="cart-outline"></ion-icon>
                    Referencia órden : {{item.IDREFERENCIA}}
                </div>
            </div>
        </div>
        <div class="d-flex align-items-center py-2 px-3 border-top border-bottom text-success">
            {{getDescripcionEstado(item)}} - Canal Mobile
            <ion-icon class="ml-auto" name="close-circle-outline"></ion-icon>
        </div>
        <div class="p-3">
            <div class="d-flex justify-content-between mb-1">
                <small class="text-secondary">Total Sin Impuestos </small>
                <small class="text-secondary">{{item.TOTALSINIMPUESTOS  | currency}}</small>
            </div>
            <div class="d-flex justify-content-between mb-3">
                <small class="text-secondary">Total a Pagar</small>
                <small class="text-secondary">{{item.IMPORTETOTAL  | currency}}</small>
            </div>
            <ion-grid style="padding: 0px !important;" *ngIf="item.ESTADOPROCESO === 'C'">
                <ion-row style="padding: 0px !important;" >
                  <ion-col >
                    <ion-button class="button-block mb-0 mx-0"  color="danger"  (click)='gestionarEliminacion(item)' >Eliminar</ion-button>
                  </ion-col>
                  <ion-col>
                    <ion-button class="button-block mb-0 mx-0"  color="primary"  (click)='procesarOrden(item)' >Editar</ion-button>
                  </ion-col>    
                </ion-row>  
            </ion-grid>    
        </div>
    </div>
</ion-content>